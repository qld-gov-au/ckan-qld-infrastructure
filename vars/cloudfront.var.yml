---
template: "templates/cloudfront.cfn.yml"
state: "{{ state | default('present')}}"
WebOrigin: "{{ WebOrigin | default('notset') }}"
WebACLId: "{{ WebACLId | default('notset') }}"

cloudformation_stacks:
  - name: "{{ titlecase_name }}-PROD-CLOUDFRONT"
    cloudformation_waf: "CKAN-PROD-WAF"
    state: "{{ state }}"
    region: "{{ region }}"
    disable_rollback: 'true'
    template: "{{ template }}"
    template_parameters:
      WebOrigin: "{{ WebOrigin }}"
      WebACLId: "{{ WebACLId }}"
      Environment: PROD
      Platform: "{{ titlecase_name }}"
      #North Virginia cert required for Cloudfront
      ACMCertificateARN: "arn:aws:acm:us-east-1:265326298602:certificate/a0bce356-b363-4d2d-9e16-2225687e3d18"
      Domain: getinvolved.qld.gov.au
      LogBucketName: "osssio-gi-prod-web-logs"
    tags:
      Environment: Prod
      Service: "{{ titlecase_name }}"
      itoc_monitored: 'true'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: "{{ titlecase_name }}-STAGING-CLOUDFRONT"
    cloudformation_waf: "CKAN-STAGING-WAF"
    state: "{{ state }}"
    region: "{{ region }}"
    disable_rollback: 'true'
    template: "{{ template }}"
    template_parameters:
      WebOrigin: "{{ WebOrigin }}"
      WebACLId: "{{ WebACLId }}"
      Environment: STAGING
      Platform: "{{ titlecase_name }}"
      #North Virginia cert required for Cloudfront
      ACMCertificateARN: "arn:aws:acm:us-east-1:366135823270:certificate/7a16ab01-1f7f-4170-8bde-05b0da8b0efb"
      Domain: dev.getinvolved.qld.gov.au
      LogBucketName: "osssio-gi-staging-web-logs"
    tags:
      Environment: STAGING
      Service: "{{ titlecase_name }}"
      itoc_monitored: 'false'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: "{{ titlecase_name }}-DEV-CLOUDFRONT"
    cloudformation_waf: "CKAN-DEV-WAF"
    state: "{{ state }}"
    region: "{{ region }}"
    disable_rollback: 'true'
    template: "{{ template }}"
    template_parameters:
      WebOrigin: "{{ WebOrigin }}"
      WebACLId: "{{ WebACLId }}"
      Environment: DEV
      Platform: "{{ titlecase_name }}"
      #North Virginia cert required for Cloudfront
      ACMCertificateARN: "arn:aws:acm:us-east-1:366135823270:certificate/57b91b7c-30ca-4d79-ae74-7b19be761b47"
      Domain: dev.aws.getinvolved.qld.gov.au
      LogBucketName: "osssio-gi-dev-web-logs"
    tags:
      Environment: DEV
      Service: "{{ titlecase_name }}"
      itoc_monitored: 'false'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"
