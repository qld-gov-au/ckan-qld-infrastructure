---
common_stack:
  state: "{{ state | default('present')}}"
  region: "{{ region }}"
  disable_rollback: true
  template: "templates/cache.cfn.yml"
  template_parameters:
    Platform: CKAN
    Subnets: "{{ Environment }}CKANDBSubnet"
  tags:
    Environment: "{{ Environment }}"
    Service: CKAN
    Division: "{{ Division }}"
    Owner: "{{ Owner }}"
    Version: "1.0"

cloudformation_stacks:
  - name: CKAN-PROD-Cache
    template_parameters:
      Environment: PROD
    tags:
      PowerManaged: "No"

  - name: CKAN-STAGING-Cache
    template_parameters:
      Environment: STAGING
    tags:
      PowerManaged: "No"

  - name: CKAN-TRAINING-Cache
    template_parameters:
      Environment: TRAINING
    tags:
      PowerManaged: "Yes"

  - name: CKAN-DEV-Cache
    template_parameters:
      Environment: DEV
    tags:
      PowerManaged: "Yes"
