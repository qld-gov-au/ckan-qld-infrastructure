---

common_stack:
  state: "{{ state | default('present')}}"
  region: "{{ region }}"
  disable_rollback: true
  template: "templates/Datashades-OpsWorks-CKAN-Extensions.cfn.yml"
  template_parameters:
    ApplicationName: "{{ titlecase_name }}"
    ApplicationId: "{{ lowercase_name }}"
    OpsWorksStack: "{{ Environment }}{{ titlecase_name }}OpsWorksStack"
    CKANThemeSource: "{{ CKANThemeSource }}"
  tags:
    Environment: "{{ Environment }}"
    Service: "{{ titlecase_name }}"
    Division: "{{ Division }}"
    Owner: "{{ Owner }}"
    Version: "1.0"
    PowerManaged: "No"

cloudformation_stacks:
  - name: "{{ titlecase_name }}-PROD-OpsWorks-CKANExtensions"
    template_parameters:
      Environment: "PROD"
      QgovExtensionRevision: "1.0.0"

  - name: "{{ titlecase_name }}-STAGING-OpsWorks-CKANExtensions"
    template_parameters:
      Environment: "STAGING"
      QgovExtensionRevision: "1.0.0"

  - name: "{{ titlecase_name }}-TRAINING-OpsWorks-CKANExtensions"
    template_parameters:
      Environment: "TRAINING"
      QgovExtensionRevision: training

  - name: "{{ titlecase_name }}-DEV-OpsWorks-CKANExtensions"
    template_parameters:
      Environment: "DEV"
      QgovExtensionRevision: develop
