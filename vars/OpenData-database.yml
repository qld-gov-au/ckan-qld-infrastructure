---
cloudformation_stacks:
  - name: OpenData-PROD-RDS
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/database.yml"
    template_parameters:
      DBAllocatedStorage: "100"
      DBClass: db.m5.large
      DBEngine: postgres
      DBEngineVersion: 10.6
      DBName: opendata
      StorageEncrypted: "True"
      DBPassword: "{{ lookup('aws_ssm', '/config/OpenData/PROD/db/master_password', region='ap-southeast-2') }}"
      DBUsername: "{{ lookup('aws_ssm', '/config/OpenData/PROD/db/master_user', region='ap-southeast-2') }}"
      DBPrivileges: "ALL"
      Environment: PROD
      Platform: OpenData
      PubliclyAccessible: "false"
      MultiAZ: "true"
      Subnets: PRODCKANDBSubnet
      VPC: CKANVpc-PROD
      StackTLD: TODO
    tags:
      Environment: PROD
      Service: Open Data
      itoc_monitored: "false"
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: OpenData-STAGING-RDS
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/database.yml"
    template_parameters:
      DBAllocatedStorage: '50'
      DBClass: db.t3.large
      DBEngine: postgres
      DBEngineVersion: 10.6
      DBName: opendata
      StorageEncrypted: "True"
      DBPassword: "{{ lookup('aws_ssm', '/config/OpenData/STAGING/db/master_password', region='ap-southeast-2') }}"
      DBUsername: "{{ lookup('aws_ssm', '/config/OpenData/STAGING/db/master_user', region='ap-southeast-2') }}"
      DBPrivileges: "ALL"
      Environment: STAGING
      Platform: OpenData
      PubliclyAccessible: "false"
      MultiAZ: "false"
      Subnets: STAGINGCKANDBSubnet
      VPC: CKANVpc-STAGING
      StackTLD: TODO
    tags:
      Environment: STAGING
      Service: Open Data
      itoc_monitored: 'false'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: OpenData-TRAINING-RDS
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/database.yml"
    template_parameters:
      DBAllocatedStorage: "100"
      DBClass: db.t3.medium
      DBEngine: postgres
      DBEngineVersion: 10.6
      DBName: opendata
      StorageEncrypted: "False"
      DBPassword: "{{ lookup('aws_ssm', '/config/OpenData/TRAINING/db/master_password', region='ap-southeast-2') }}"
      DBUsername: "{{ lookup('aws_ssm', '/config/OpenData/TRAINING/db/master_user', region='ap-southeast-2') }}"
      DBPrivileges: "ALL"
      Environment: TRAINING
      Platform: OpenData
      PubliclyAccessible: "false"
      MultiAZ: "false"
      Subnets: TRAININGCKANDBSubnet
      VPC: CKANVpc-TRAINING
      StackTLD: TODO
    tags:
      Environment: TRAINING
      Service: Open Data
      itoc_monitored: "false"
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"
      PowerManaged: "Yes"

  - name: OpenData-DEV-RDS
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/database.yml"
    template_parameters:
      DBAllocatedStorage: "100"
      DBClass: db.t3.medium
      DBEngine: postgres
      DBEngineVersion: 10.6
      DBName: opendata
      StorageEncrypted: "False"
      DBPassword: "{{ lookup('aws_ssm', '/config/OpenData/DEV/db/master_password', region='ap-southeast-2') }}"
      DBUsername: "{{ lookup('aws_ssm', '/config/OpenData/DEV/db/master_user', region='ap-southeast-2') }}"
      DBPrivileges: "ALL"
      Environment: DEV
      Platform: OpenData
      PubliclyAccessible: "false"
      MultiAZ: "false"
      Subnets: DEVCKANDBSubnet
      VPC: CKANVpc-DEV
      StackTLD: opendatadevtrail.devpit140cs.qgov.net.au
    tags:
      Environment: DEV
      Service: Open Data
      itoc_monitored: "false"
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"
      PowerManaged: "Yes"
