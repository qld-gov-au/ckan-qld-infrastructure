---
cloudformation_stacks:
  - name: CKAN-PROD-OpsWorks-EFS-stack
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/Datashades-OpsWorks-EFS-CKAN-Stack.cfn.yml"
    template_parameters:
      Environment: PROD
      StackTLD: TODO
      CKANSource: https://github.com/ckan/ckan/archive/ckan-2.7.3.zip
      DefaultEC2Key: osssio-global-ckan
      PGDBPassword: "{{ lookup('aws_ssm', 'CKAN_PROD_MASTER_DBPASS', region='ap-southeast-2') }}"
      WebSubnets: PRODCKANWebSubnet
      AppSubnets: PRODCKANAppSubnet
      DbSubnets: PRODCKANDbSubnet
    tags:
      Environment: PROD
      Service: "CKAN"
      itoc_monitored: "false"
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: CKAN-STAGING-OpsWorks-EFS-stack
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/Datashades-OpsWorks-EFS-CKAN-Stack.cfn.yml"
    template_parameters:
      Environment: STAGING
      StackTLD: TODO
      CKANSource: https://github.com/ckan/ckan/archive/ckan-2.7.3.zip
      DefaultEC2Key: osssio-global-ckan
      PGDBPassword: "{{ lookup('aws_ssm', 'CKAN_STAGING_MASTER_DBPASS', region='ap-southeast-2') }}"
      WebSubnets: STAGINGCKANWebSubnet
      AppSubnets: STAGINGCKANAppSubnet
      DbSubnets: STAGINGCKANDbSubnet
    tags:
      Environment: STAGING
      Service: "CKAN"
      itoc_monitored: 'false'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: CKAN-TRAINING-OpsWorks-EFS-stack
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/Datashades-OpsWorks-EFS-CKAN-Stack.cfn.yml"
    template_parameters:
      Environment: TRAINING
      StackTLD: TODO
      CKANSource: https://github.com/ckan/ckan/archive/ckan-2.7.3.zip
      DefaultEC2Key: osssio-global-ckan
      PGDBPassword: "{{ lookup('aws_ssm', 'CKAN_TRAINING_MASTER_DBPASS', region='ap-southeast-2') }}"
      WebSubnets: TRAININGCKANWebSubnet
      AppSubnets: TRAININGCKANAppSubnet
      DbSubnets: TRAININGCKANDbSubnet
    tags:
      Environment: TRAINING
      Service: "CKAN"
      itoc_monitored: 'false'
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"

  - name: CKAN-DEV-OpsWorks-EFS-stack
    state: present
    region: ap-southeast-2
    disable_rollback: true
    template: "templates/Datashades-OpsWorks-EFS-CKAN-Stack.cfn.yml"
    template_parameters:
      Environment: DEV
      StackTLD: ckandevtrail.devpit140cs.qgov.net.au
      CKANSource: https://github.com/ckan/ckan/archive/ckan-2.7.5.zip
      DefaultEC2Key: osssio-global-ckan
      PGDBPassword: "{{ lookup('aws_ssm', 'CKAN_DEV_MASTER_DBPASS', region='ap-southeast-2') }}"
      WebSubnets: DEVCKANWebSubnet
      AppSubnets: DEVCKANAppSubnet
      DbSubnets: DEVCKANDbSubnet
    tags:
      Environment: DEV
      Service: "CKAN"
      itoc_monitored: "false
      Division: "Qld Online"
      Owner: "Development and Delivery"
      Version: "1.0"
      PowerManaged: "Yes"
